import{b as xa,r as m,e as P,y as Ea,w as oa,m as i,q as a,M as Ta,F as v,E as o,j as h,G as Va,O as $a,D as y,t as Z,u as k,L as ua,k as M,o as n}from"./vendor.Mb-DmQZ9.js";import{u as La}from"./useGlobalFilters.DPHmOsAT.js";import{h as D,a as E}from"./formatUtils.SsKD9Isb.js";import{I as aa,_ as Na}from"./index.Dr26WDVJ.js";import"./pdf-vendor.BFzd3waL.js";import"./calendarioService.B6FHbTv3.js";import"./icons-vendor.vP8HAgRq.js";import"./vue-router.BEbJbLaE.js";const Da={class:"campanhas-wrapper"},Ra={class:"campanhas-view"},Ba={key:0,class:"campanhas-content"},Ia={key:0,class:"error-state"},Fa={key:1,class:"empty-state"},za={key:2,class:"campanhas-content"},Ua={class:"card card--campanhas"},ja={class:"card__header camp-header"},Oa={class:"camp-header__controls"},Ga=["value"],Ja={key:0,class:"camp-hero"},Qa={class:"camp-hero__info"},Ha={id:"camp-cycle"},Ka={class:"camp-period camp-period--validity"},Wa={id:"camp-validity",class:"camp-validity"},Xa={id:"camp-note",class:"muted"},Ya={class:"camp-hero__stats",id:"camp-headline"},Za={key:0},ae={key:1,class:"camp-kpi-grid",id:"camp-kpis"},ee={key:0},se={key:2},te={key:0},le={key:2,class:"card card--camp-sims"},ie={class:"sim-grid"},ne={key:0,id:"sim-equipe",class:"sim-card"},oe={class:"sim-card__head"},ue={class:"sim-card__title"},de={type:"button",class:"sim-help","aria-label":"Como funciona o simulador de equipe",title:"Ajuste os percentuais de cada indicador entre 0% e 150%. A equipe se torna elegível com todos os indicadores a partir de 90% e somando pelo menos 100 pontos."},re={class:"sim-presets",id:"team-presets"},ce=["onClick"],me={class:"sim-table"},ve={class:"sim-indicator"},he={key:0,class:"muted",style:{"font-size":"12px"}},pe={class:"sim-weight"},ge={class:"sim-slider"},be=["value","onInput"],_e={class:"sim-slider-value"},fe={class:"sim-points"},ye={key:1,class:"status-pill status-pill--ok"},ke={class:"sim-summary"},Pe={class:"sim-total"},qe={class:"sim-progress"},Ce={class:"sim-progress__track"},we={class:"sim-outcome"},Me={key:1,id:"sim-individual",class:"sim-card"},Ae={class:"sim-card__head"},Se={class:"sim-card__title"},xe={type:"button",class:"sim-help","aria-label":"Como funciona o simulador individual",title:"Escolha um perfil, use os presets ou ajuste manualmente. Para elegibilidade é necessário atingir 90% em cada indicador e acumular 100 pontos ou mais."},Ee={class:"segmented seg-mini",role:"tablist",id:"individual-profiles"},Te=["onClick"],Ve={class:"sim-presets",id:"individual-presets"},$e=["onClick"],Le={key:0,id:"individual-description",class:"sim-hint"},Ne={class:"sim-table"},De={class:"sim-indicator"},Re={class:"sim-weight"},Be={class:"sim-slider"},Ie=["value","onInput"],Fe={class:"sim-slider-value"},ze={class:"sim-points"},Ue={key:1,class:"status-pill status-pill--ok"},je={class:"sim-summary"},Oe={class:"sim-total"},Ge={class:"sim-progress"},Je={class:"sim-progress__track"},Qe={class:"sim-outcome"},He={key:3,class:"card card--camp-ranking"},Ke={id:"camp-ranking",class:"camp-ranking-wrapper"},We={class:"camp-ranking-table"},Xe={class:"pos-col"},Ye={class:"regional-col"},Ze={class:"sim-points"},as=xa({__name:"Campanhas",setup(es){const{filterState:da}=La(),A=m(!1),T=m(null),S=m([]),q=m(null),u=m(null),ea=m([]),J=m([]),R=m([]),V=m(null),B=m(null),Q=m({}),H=m({}),I=m({}),F=m({}),$=m(null),c=m(null),r=m(null),ra=[{id:"sprint-1",label:"Campanha Q1 2024",cycle:"Q1 2024",note:"Campanha de incentivo para o primeiro trimestre.",period:{start:"2024-01-01",end:"2024-03-31"},headStats:[{label:"Participantes",value:"1.234",sub:"equipes ativas"},{label:"Meta Total",value:"R$ 2,5M",sub:"em vendas"},{label:"Realizado",value:"R$ 1,8M",sub:"72% da meta"}],summary:[{id:"equipes",label:"Equipes elegíveis",value:45,total:60},{id:"media",label:"Média de pontos",value:125.5,unit:"pts"},{id:"recorde",label:"Recorde",value:198.3,unit:"pts",complement:"Equipe Alpha"}],team:{minThreshold:90,superThreshold:120,cap:150,eligibilityMinimum:100,defaultPreset:"meta",indicators:[{id:"linhas",label:"Linhas governamentais",short:"Linhas",weight:40,hint:"Operações direcionadas, BB Giro e BNDES.",default:100},{id:"cash",label:"Cash (TPV)",short:"Cash",weight:30,hint:"Centralização de caixa e TPV eletrônico.",default:100},{id:"conquista",label:"Conquista cliente PJ",short:"Conquista",weight:30,hint:"Abertura de contas e ativação digital.",default:100}],presets:[{id:"minimo",label:"Mínimo obrigatório (90%)",values:{linhas:90,cash:90,conquista:90}},{id:"meta",label:"Meta do sprint (100%)",values:{linhas:100,cash:100,conquista:100}},{id:"stretch",label:"Meta esticada (120%)",values:{linhas:120,cash:120,conquista:120}}]},individual:{profiles:[{id:"negocios",label:"Negócios",description:"Carteiras MPE com foco em relacionamento consultivo.",minThreshold:90,superThreshold:120,cap:150,eligibilityMinimum:100,defaultPreset:"meta",indicators:[{id:"linhas",label:"Linhas governamentais",short:"Linhas",weight:40,default:100},{id:"cash",label:"Cash (TPV)",short:"Cash",weight:30,default:100},{id:"conquista",label:"Conquista cliente PJ",short:"Conquista",weight:30,default:100}],presets:[{id:"minimo",label:"90% em todos",values:{linhas:90,cash:90,conquista:90}},{id:"meta",label:"Meta (100%)",values:{linhas:100,cash:100,conquista:100}},{id:"destaque",label:"Stretch (120%)",values:{linhas:120,cash:120,conquista:120}}]},{id:"empresas",label:"Empresas",description:"Grandes empresas e governo com foco em volume.",minThreshold:90,superThreshold:120,cap:150,eligibilityMinimum:100,defaultPreset:"meta",indicators:[{id:"linhas",label:"Linhas governamentais",short:"Linhas",weight:45,default:100},{id:"cash",label:"Cash (TPV)",short:"Cash",weight:35,default:100},{id:"conquista",label:"Conquista cliente PJ",short:"Conquista",weight:20,default:100}],presets:[{id:"minimo",label:"90% em todos",values:{linhas:90,cash:90,conquista:90}},{id:"meta",label:"Meta (100%)",values:{linhas:100,cash:100,conquista:100}},{id:"stretch",label:"Stretch (120%)",values:{linhas:120,cash:120,conquista:120}}]}]}},{id:"sprint-2",label:"Campanha Q2 2024",cycle:"Q2 2024",note:"Campanha de incentivo para o segundo trimestre.",period:{start:"2024-04-01",end:"2024-06-30"},headStats:[{label:"Participantes",value:"1.456",sub:"equipes ativas"},{label:"Meta Total",value:"R$ 3,0M",sub:"em vendas"},{label:"Realizado",value:"R$ 2,1M",sub:"70% da meta"}],summary:[{id:"equipes",label:"Equipes elegíveis",value:52,total:65},{id:"media",label:"Média de pontos",value:132.8,unit:"pts"},{id:"recorde",label:"Recorde",value:205.7,unit:"pts",complement:"Equipe Beta"}],team:{minThreshold:90,superThreshold:120,cap:150,eligibilityMinimum:100,defaultPreset:"meta",indicators:[{id:"linhas",label:"Linhas governamentais",short:"Linhas",weight:40,hint:"Operações direcionadas, BB Giro e BNDES.",default:100},{id:"cash",label:"Cash (TPV)",short:"Cash",weight:30,hint:"Centralização de caixa e TPV eletrônico.",default:100},{id:"conquista",label:"Conquista cliente PJ",short:"Conquista",weight:30,hint:"Abertura de contas e ativação digital.",default:100}],presets:[{id:"minimo",label:"Mínimo obrigatório (90%)",values:{linhas:90,cash:90,conquista:90}},{id:"meta",label:"Meta do sprint (100%)",values:{linhas:100,cash:100,conquista:100}},{id:"stretch",label:"Meta esticada (120%)",values:{linhas:120,cash:120,conquista:120}}]},individual:{profiles:[{id:"negocios",label:"Negócios",description:"Carteiras MPE com foco em relacionamento consultivo.",minThreshold:90,superThreshold:120,cap:150,eligibilityMinimum:100,defaultPreset:"meta",indicators:[{id:"linhas",label:"Linhas governamentais",short:"Linhas",weight:40,default:100},{id:"cash",label:"Cash (TPV)",short:"Cash",weight:30,default:100},{id:"conquista",label:"Conquista cliente PJ",short:"Conquista",weight:30,default:100}],presets:[{id:"minimo",label:"90% em todos",values:{linhas:90,cash:90,conquista:90}},{id:"meta",label:"Meta (100%)",values:{linhas:100,cash:100,conquista:100}},{id:"destaque",label:"Stretch (120%)",values:{linhas:120,cash:120,conquista:120}}]},{id:"empresas",label:"Empresas",description:"Grandes empresas e governo com foco em volume.",minThreshold:90,superThreshold:120,cap:150,eligibilityMinimum:100,defaultPreset:"meta",indicators:[{id:"linhas",label:"Linhas governamentais",short:"Linhas",weight:45,default:100},{id:"cash",label:"Cash (TPV)",short:"Cash",weight:35,default:100},{id:"conquista",label:"Conquista cliente PJ",short:"Conquista",weight:20,default:100}],presets:[{id:"minimo",label:"90% em todos",values:{linhas:90,cash:90,conquista:90}},{id:"meta",label:"Meta (100%)",values:{linhas:100,cash:100,conquista:100}},{id:"stretch",label:"Stretch (120%)",values:{linhas:120,cash:120,conquista:120}}]}]}}],ca=[{rank:1,unidade:"Agência Centro",label:"Agência Centro",linhas:125,cash:118,conquista:132,totalPoints:128.5,finalStatus:"Elegível"},{rank:2,unidade:"Agência Norte",label:"Agência Norte",linhas:120,cash:115,conquista:128,totalPoints:120.5,finalStatus:"Elegível"},{rank:3,unidade:"Agência Sul",label:"Agência Sul",linhas:115,cash:110,conquista:125,totalPoints:115.5,finalStatus:"Elegível"},{rank:4,unidade:"Agência Leste",label:"Agência Leste",linhas:110,cash:105,conquista:120,totalPoints:111.5,finalStatus:"Elegível"},{rank:5,unidade:"Agência Oeste",label:"Agência Oeste",linhas:105,cash:100,conquista:115,totalPoints:106.5,finalStatus:"Elegível"},{rank:6,unidade:"Agência Alpha",label:"Agência Alpha",linhas:100,cash:95,conquista:110,totalPoints:101.5,finalStatus:"Elegível"},{rank:7,unidade:"Agência Beta",label:"Agência Beta",linhas:95,cash:90,conquista:105,totalPoints:96.5,finalStatus:"Elegível"},{rank:8,unidade:"Agência Gamma",label:"Agência Gamma",linhas:90,cash:88,conquista:100,totalPoints:92.5,finalStatus:"Elegível"},{rank:9,unidade:"Agência Delta",label:"Agência Delta",linhas:88,cash:85,conquista:98,totalPoints:90.5,finalStatus:"Elegível"},{rank:10,unidade:"Agência Epsilon",label:"Agência Epsilon",linhas:85,cash:82,conquista:95,totalPoints:87.5,finalStatus:"Ajustar"}],ma=()=>{A.value=!0,T.value=null,setTimeout(()=>{S.value=ra,S.value.length>0&&!q.value&&(q.value=S.value[0].id),A.value=!1},300)},va=()=>{q.value&&(A.value=!0,T.value=null,setTimeout(()=>{const t=S.value.find(s=>s.id===q.value);if(!t){T.value="Sprint não encontrada",A.value=!1;return}if(u.value=t,ea.value=t.headStats||[],J.value=t.summary||[],R.value=ca,V.value=t.team||null,B.value=t.individual||null,t.team){const s=z(t);c.value=C(t.team,s)}if(t.individual?.profiles?.length){const s=t.individual.profiles[0];$.value=s.id;const e=L(t,s);r.value=C(s,e)}A.value=!1},200))},b=P(()=>!u.value?.individual?.profiles||!$.value?null:u.value.individual.profiles.find(t=>t.id===$.value)||null),sa=P(()=>u.value?.team?z(u.value):{}),ta=P(()=>!u.value||!b.value?{}:L(u.value,b.value)),ha=P(()=>u.value&&I.value[u.value.id]||"custom"),pa=P(()=>{if(!u.value||!b.value)return"custom";const t=`${u.value.id}:${b.value.id}`;return F.value[t]||"custom"}),ga=t=>{if(!t)return"Vigência não informada";const s=t.start?new Date(t.start).toLocaleDateString("pt-BR"):null,e=t.end?new Date(t.end).toLocaleDateString("pt-BR"):null;return s&&e?`Vigência da campanha: de ${s} até ${e}`:s?`Vigência da campanha a partir de ${s}`:e?`Vigência da campanha até ${e}`:"Vigência não informada"},ba=P(()=>ga(u.value?.period)),_a=P(()=>u.value?.label||u.value?.cycle||""),fa=P(()=>{const t=u.value?.note||"",s=R.value.length,l=s?` Exibindo ${D(s)} unidades filtradas.`:" Nenhuma unidade encontrada para o filtro atual.";return`${t}${l}`.trim()}),la=t=>t==null||isNaN(t)?"—":new Intl.NumberFormat("pt-BR",{minimumFractionDigits:1,maximumFractionDigits:1}).format(t)+"%",K=t=>t==null||isNaN(t)?"—":new Intl.NumberFormat("pt-BR",{minimumFractionDigits:1,maximumFractionDigits:1}).format(t),p=t=>{if(t==null||t==="")return 0;const s=typeof t=="string"?parseFloat(t):t;return Number.isFinite(s)?s:0},C=(t,s)=>{const e=t?.indicators||[],l=p(t?.minThreshold??90),d=p(t?.superThreshold??l+20),g=p(t?.cap??150),_=p(t?.eligibilityMinimum??100)||100,x=e.map(f=>{const w=Math.max(0,p(s?.[f.id]??f.default??0)),na=Math.min(g,w),Sa=p(f.weight)*na/100;let O="Crítico",G="status-pill--alert";return w>=d?(O="Parabéns",G="status-pill--great"):w>=l?(O="Elegível",G="status-pill--ok"):w>=Math.max(0,l-10)&&(O="Ajustar",G="status-pill--warn"),{...f,pct:w,capped:na,points:Sa,statusText:O,statusClass:G}}),N=x.reduce((f,w)=>f+w.points,0),W=x.every(f=>f.pct>=l),X=x.every(f=>f.pct>=d),wa=W&&N>=_;let U="Não elegível",j="status-tag--alert";X&&N>=_?(U="Parabéns",j="status-tag--great"):wa?(U="Elegível",j="status-tag--ok"):W&&(U="Ajustar foco",j="status-tag--warn");const Y=Math.max(0,_-N),Ma=Math.max(0,Math.min(1,N/_)),Aa=Y>0?`${D(Math.round(Y))} pts para elegibilidade`:X?"Acima do stretch":"Meta mínima atingida";return{rows:x,totalPoints:N,finalStatus:U,finalClass:j,progressPct:Ma,progressLabel:Aa,shortfall:Y,hasAllMin:W,hasAllStretch:X}},z=t=>{if(!t?.team)return{};if(!Q.value[t.id]){const s={};(t.team.indicators||[]).forEach(e=>{s[e.id]=p(e.default??100)}),Q.value[t.id]=s,I.value[t.id]=t.team.defaultPreset||t.team.presets?.[0]?.id||"custom"}return Q.value[t.id]||{}},L=(t,s)=>{if(!t||!s)return{};const e=`${t.id}:${s.id}`;H.value[t.id]||(H.value[t.id]={});const l=H.value[t.id];if(!l)return{};if(!l[s.id]){const d={};(s.indicators||[]).forEach(g=>{d[g.id]=p(g.default??100)}),l[s.id]=d,F.value[e]=s.defaultPreset||s.presets?.[0]?.id||"custom"}return l[s.id]||{}},ia=(t,s)=>!t||!Array.isArray(s)?null:s.find(e=>Object.entries(e.values||{}).every(([d,g])=>Math.round(p(g))===Math.round(p(t[d]))))?.id||null,ya=(t,s,e)=>{const l=z(t);l[s]=e,c.value=C(t.team,l);const d=ia(l,t.team.presets||[]);I.value[t.id]=d||"custom"},ka=(t,s)=>{const e=t.team.presets?.find(d=>d.id===s);if(!e)return;const l=z(t);Object.entries(e.values||{}).forEach(([d,g])=>{l[d]=p(g)}),I.value[t.id]=s,c.value=C(t.team,l)},Pa=(t,s,e,l)=>{const d=L(t,s);d[e]=l,r.value=C(s,d);const g=`${t.id}:${s.id}`,_=ia(d,s.presets||[]);F.value[g]=_||"custom"},qa=(t,s,e)=>{const l=s.presets?.find(_=>_.id===e);if(!l)return;const d=L(t,s);Object.entries(l.values||{}).forEach(([_,x])=>{d[_]=p(x)});const g=`${t.id}:${s.id}`;F.value[g]=e,r.value=C(s,d)},Ca=(t,s)=>{$.value=s;const e=t.individual?.profiles?.find(l=>l.id===s);if(e){const l=L(t,e);r.value=C(e,l)}};return Ea(()=>{ma()}),oa(q,()=>{va()}),oa([da],()=>{},{deep:!0}),(t,s)=>(n(),i("div",Da,[a("div",Ra,[A.value&&!u.value?(n(),i("div",Ba,[...s[1]||(s[1]=[Ta('<section class="card card--campanhas" data-v-6cb89d6a><header class="card__header camp-header" data-v-6cb89d6a><div class="skeleton skeleton--title" style="height:24px;width:150px;margin-bottom:8px;border-radius:6px;" data-v-6cb89d6a></div><div class="skeleton skeleton--subtitle" style="height:16px;width:300px;border-radius:6px;" data-v-6cb89d6a></div><div class="skeleton skeleton--select" style="height:40px;width:200px;border-radius:8px;" data-v-6cb89d6a></div></header><div class="camp-hero" data-v-6cb89d6a><div class="skeleton skeleton--hero" style="height:120px;width:100%;border-radius:12px;margin-bottom:24px;" data-v-6cb89d6a></div></div><div class="camp-kpi-grid" data-v-6cb89d6a><div class="skeleton skeleton--kpi" style="height:100px;border-radius:12px;" data-v-6cb89d6a></div><div class="skeleton skeleton--kpi" style="height:100px;border-radius:12px;" data-v-6cb89d6a></div><div class="skeleton skeleton--kpi" style="height:100px;border-radius:12px;" data-v-6cb89d6a></div></div></section>',1)])])):(n(),i(v,{key:1},[T.value?(n(),i("div",Ia,[a("p",null,o(T.value),1)])):S.value.length===0?(n(),i("div",Fa,[...s[2]||(s[2]=[a("p",null,"Nenhuma campanha disponível.",-1)])])):(n(),i("div",za,[a("section",Ua,[a("header",ja,[s[4]||(s[4]=a("div",{class:"title-subtitle"},[a("h3",null,"Campanhas"),a("p",{class:"muted"},"Acompanhe o desempenho das campanhas e simule cenários.")],-1)),a("div",Oa,[s[3]||(s[3]=a("label",{for:"campanha-sprint",class:"muted"},"CAMPANHA",-1)),Va(a("select",{id:"campanha-sprint","onUpdate:modelValue":s[0]||(s[0]=e=>q.value=e),class:"input input--sm"},[(n(!0),i(v,null,y(S.value,e=>(n(),i("option",{key:e.id,value:e.id},o(e.label),9,Ga))),128))],512),[[$a,q.value]])])]),u.value?(n(),i("div",Ja,[a("div",Qa,[a("p",Ha,o(_a.value),1),a("div",Ka,[Z(aa,{name:"calendar",size:16}),a("span",Wa,o(ba.value),1)]),a("p",Xa,o(fa.value),1)]),a("div",Ya,[(n(!0),i(v,null,y(ea.value,(e,l)=>(n(),i("div",{key:l,class:"camp-hero__stat"},[a("span",null,o(e.label),1),a("strong",null,o(e.value),1),e.sub?(n(),i("small",Za,o(e.sub),1)):h("",!0)]))),128))])])):h("",!0),u.value&&J.value.length>0?(n(),i("div",ae,[(n(!0),i(v,null,y(J.value,(e,l)=>(n(),i("div",{key:l,class:"camp-kpi"},[a("span",null,o(e.label),1),e.total!=null?(n(),i(v,{key:0},[a("strong",null,o(k(D)(e.value))+" / "+o(k(D)(e.total)),1),a("small",null,"de "+o(k(D)(e.total))+" monitoradas",1)],64)):e.unit==="pts"?(n(),i(v,{key:1},[a("strong",null,o(k(E)(e.value,{withUnit:!0})),1),e.complement?(n(),i("small",ee,o(e.complement),1)):h("",!0)],64)):e.text?(n(),i("strong",se,o(e.text),1)):(n(),i(v,{key:3},[a("strong",null,o(K(e.value)),1),e.complement?(n(),i("small",te,o(e.complement),1)):h("",!0)],64))]))),128))])):h("",!0),u.value&&(V.value||B.value)?(n(),i("div",le,[a("div",ie,[V.value?(n(),i("div",ne,[a("div",oe,[a("div",ue,[s[5]||(s[5]=a("h5",null,"Simulador de equipe",-1)),a("button",de,[Z(aa,{name:"info-circle",size:18})])]),s[6]||(s[6]=a("p",null,"Defina o atingimento de cada indicador para estimar a pontuação e a elegibilidade da equipe.",-1)),s[7]||(s[7]=a("p",{class:"sim-hint"},"Elegível com todos os indicadores ≥ 90% e pelo menos 100 pontos.",-1))]),a("div",re,[(n(!0),i(v,null,y(V.value.presets||[],e=>(n(),i("button",{key:e.id,type:"button",class:M(["sim-chip",{"is-active":ha.value===e.id}]),onClick:l=>ka(u.value,e.id)},o(e.label),11,ce))),128))]),a("table",me,[s[8]||(s[8]=a("thead",null,[a("tr",null,[a("th",null,"Indicador"),a("th",null,"Peso"),a("th",null,"Atingimento"),a("th",null,"Pontos"),a("th",null,"Resultado")])],-1)),a("tbody",null,[(n(!0),i(v,null,y(V.value.indicators||[],e=>(n(),i("tr",{key:e.id},[a("td",ve,[a("strong",null,o(e.label),1),e.hint?(n(),i("div",he,o(e.hint),1)):h("",!0)]),a("td",pe,o(K(e.weight))+"%",1),a("td",null,[a("div",ge,[a("input",{type:"range",min:0,max:160,value:sa.value[e.id]||e.default||100,onInput:l=>ya(u.value,e.id,Number(l.target.value))},null,40,be),a("span",_e,o(la(sa.value[e.id]||e.default||100)),1)])]),a("td",fe,o(c.value?k(E)(c.value.rows.find(l=>l.id===e.id)?.points||0,{withUnit:!0}):"—"),1),a("td",null,[c.value?(n(),i("span",{key:0,class:M(["status-pill",c.value.rows.find(l=>l.id===e.id)?.statusClass||"status-pill--ok"])},o(c.value.rows.find(l=>l.id===e.id)?.statusText||"Elegível"),3)):(n(),i("span",ye,"Elegível"))])]))),128))])]),a("div",ke,[a("div",Pe,[s[9]||(s[9]=a("span",null,"Pontuação total",-1)),a("strong",null,o(c.value?k(E)(c.value.totalPoints,{withUnit:!0}):"—"),1)]),a("div",qe,[a("div",Ce,[a("div",{class:"sim-progress__fill",style:ua({"--target":c.value?`${Math.round(c.value.progressPct*100)}%`:"0%"})},null,4)]),a("small",null,o(c.value?c.value.progressLabel:"0% do mínimo necessário"),1)]),a("div",we,[c.value?(n(),i("span",{key:0,class:M(["status-tag",c.value.finalClass])},o(c.value.finalStatus),3)):h("",!0)])])])):h("",!0),B.value?(n(),i("div",Me,[a("div",Ae,[a("div",Se,[s[10]||(s[10]=a("h5",null,"Simulador individual",-1)),a("button",xe,[Z(aa,{name:"info-circle",size:18})])]),s[11]||(s[11]=a("p",null,"Simule o desempenho de um gerente considerando os mesmos pesos da campanha.",-1)),s[12]||(s[12]=a("p",{class:"sim-hint"},"Elegível com todos os indicadores ≥ 90% e pelo menos 100 pontos.",-1))]),a("div",Ee,[(n(!0),i(v,null,y(B.value.profiles||[],e=>(n(),i("button",{key:e.id,type:"button",class:M(["seg-btn",{"is-active":$.value===e.id}]),onClick:l=>Ca(u.value,e.id)},o(e.label),11,Te))),128))]),a("div",Ve,[(n(!0),i(v,null,y(b.value?.presets||[],e=>(n(),i("button",{key:e.id,type:"button",class:M(["sim-chip",{"is-active":pa.value===e.id}]),onClick:l=>qa(u.value,b.value,e.id)},o(e.label),11,$e))),128))]),b.value?(n(),i("p",Le,o(b.value.description||""),1)):h("",!0),a("table",Ne,[s[13]||(s[13]=a("thead",null,[a("tr",null,[a("th",null,"Indicador"),a("th",null,"Peso"),a("th",null,"Atingimento"),a("th",null,"Pontos"),a("th",null,"Resultado")])],-1)),a("tbody",null,[(n(!0),i(v,null,y(b.value?.indicators||[],e=>(n(),i("tr",{key:e.id},[a("td",De,[a("strong",null,o(e.label),1)]),a("td",Re,o(K(e.weight))+"%",1),a("td",null,[a("div",Be,[a("input",{type:"range",min:0,max:160,value:ta.value[e.id]||e.default||100,onInput:l=>Pa(u.value,b.value,e.id,Number(l.target.value))},null,40,Ie),a("span",Fe,o(la(ta.value[e.id]||e.default||100)),1)])]),a("td",ze,o(r.value?k(E)(r.value.rows.find(l=>l.id===e.id)?.points||0,{withUnit:!0}):"—"),1),a("td",null,[r.value?(n(),i("span",{key:0,class:M(["status-pill",r.value.rows.find(l=>l.id===e.id)?.statusClass||"status-pill--ok"])},o(r.value.rows.find(l=>l.id===e.id)?.statusText||"Elegível"),3)):(n(),i("span",Ue,"Elegível"))])]))),128))])]),a("div",je,[a("div",Oe,[s[14]||(s[14]=a("span",null,"Pontuação total",-1)),a("strong",null,o(r.value?k(E)(r.value.totalPoints,{withUnit:!0}):"—"),1)]),a("div",Ge,[a("div",Je,[a("div",{class:"sim-progress__fill",style:ua({"--target":r.value?`${Math.round(r.value.progressPct*100)}%`:"0%"})},null,4)]),a("small",null,o(r.value?r.value.progressLabel:"0% do mínimo necessário"),1)]),a("div",Qe,[r.value?(n(),i("span",{key:0,class:M(["status-tag",r.value.finalClass])},o(r.value.finalStatus),3)):h("",!0)])])])):h("",!0)])])):h("",!0),u.value&&R.value.length>0?(n(),i("div",He,[s[21]||(s[21]=a("div",{class:"card__header"},[a("div",{class:"title-subtitle"},[a("h3",null,"Ranking da Campanha"),a("p",{id:"camp-ranking-desc",class:"muted"}," Acompanhe a performance das Unidades e a elegibilidade frente aos critérios mínimos. ")])],-1)),a("div",Ke,[a("table",We,[s[20]||(s[20]=a("thead",null,[a("tr",null,[a("th",{class:"pos-col"},"#"),a("th",{class:"regional-col"},"Unidade"),a("th",null,"Linhas governamentais"),a("th",null,"Cash (TPV)"),a("th",null,"Abertura de contas"),a("th",null,"Pontuação final"),a("th",null,"Atividade comercial"),a("th",null,"Elegibilidade")])],-1)),a("tbody",null,[(n(!0),i(v,null,y(R.value,(e,l)=>(n(),i("tr",{key:l},[a("td",Xe,o(e.rank||l+1),1),a("td",Ye,o(e.unidade||e.label||"—"),1),s[15]||(s[15]=a("td",null,[a("div",{class:"indicator-bar"},[a("div",{class:"indicator-bar__track"},[a("span",{style:{"--target":"0%"}})]),a("div",{class:"indicator-bar__value"},"—")])],-1)),s[16]||(s[16]=a("td",null,[a("div",{class:"indicator-bar"},[a("div",{class:"indicator-bar__track"},[a("span",{style:{"--target":"0%"}})]),a("div",{class:"indicator-bar__value"},"—")])],-1)),s[17]||(s[17]=a("td",null,[a("div",{class:"indicator-bar"},[a("div",{class:"indicator-bar__track"},[a("span",{style:{"--target":"0%"}})]),a("div",{class:"indicator-bar__value"},"—")])],-1)),a("td",Ze,o(k(E)(e.totalPoints||0,{withUnit:!0})),1),s[18]||(s[18]=a("td",null,"—",-1)),s[19]||(s[19]=a("td",null,[a("span",{class:"elegibility-badge elegibility-badge--ok"},"Elegível")],-1))]))),128))])])])])):h("",!0)])]))],64))])]))}}),rs=Na(as,[["__scopeId","data-v-6cb89d6a"]]);export{rs as default};
