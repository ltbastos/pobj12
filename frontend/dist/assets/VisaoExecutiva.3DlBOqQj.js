import{u as X}from"./useGlobalFilters.DmZnXsRL.js";import{h as Y}from"./pdf-vendor.jXUlHPMi.js";import{g as E,f as I,i as O,E as J}from"./EmptyState.vue_vue_type_style_index_0_scoped_69c25b95_lang.Cl86qzRi.js";import{a as Z,A as ee,_ as B,I as ae}from"./index.gUBC-8sV.js";import{b as j,e as b,r as V,w as Q,y as U,m as c,q as t,F as G,D as F,o as n,C as N,L as P,E as h,u as L,k as A,j as te,M as se,g as le,t as R}from"./vendor.iNPlSTaR.js";import{u as oe}from"./useBusinessDays.Bg-BN2nh.js";import"./icons-vendor.pg7b-e9c.js";import"./vue-router.BQVFLPdy.js";import"./useResumoData.BkLHyhfh.js";function ie(){return{exportToPDF:async(e,r)=>{let d=null;if(typeof e=="string"?d=document.querySelector(`#${e}`):e instanceof HTMLElement?d=e:e&&"value"in e&&(d=e.value),!d)throw console.error("Elemento não encontrado"),new Error("Elemento não encontrado");const p=r||`visao-executiva-${new Date().toISOString().split("T")[0]}.pdf`,y={margin:[10,10,10,10],filename:p,image:{type:"jpeg",quality:.98},html2canvas:{scale:2,useCORS:!0,logging:!1,backgroundColor:"#ffffff"},jsPDF:{unit:"mm",format:"a4",orientation:"landscape"},pagebreak:{mode:["avoid-all","css","legacy"]}};try{await Y().set(y).from(d).save()}catch(_){throw console.error("Erro ao gerar PDF:",_),_}}}}async function ne(l){const e={};l&&(l.segmento&&(e.segmento=l.segmento),l.diretoria&&(e.diretoria=l.diretoria),l.regional&&(e.regional=l.regional),l.agencia&&(e.agencia=l.agencia),l.gerenteGestao&&(e.gerenteGestao=l.gerenteGestao),l.gerente&&(e.gerente=l.gerente),l.familia&&(e.familia=l.familia),l.indicador&&(e.indicador=l.indicador),l.subindicador&&(e.subindicador=l.subindicador),l.dataInicio&&(e.dataInicio=l.dataInicio),l.dataFim&&(e.dataFim=l.dataFim));const r=await Z(ee.EXEC,e);return r.success&&r.data?r.data:(console.error("Erro ao buscar dados executivos:",r.error),null)}const re={class:"exec-chart"},ce={class:"exec-head"},de={id:"exec-chart-legend",class:"chart-legend"},ue=j({__name:"ExecChart",props:{chartData:{}},setup(l){const e=l,r=b(()=>e.chartData.series.length>0),d=V(null),p=()=>{if(!d.value||!r.value)return;const y=d.value,_=900,$=260,g={t:28,r:36,b:48,l:64},w=_-g.l-g.r,x=$-g.t-g.b,C=e.chartData.labels.length,D=u=>{if(C<=1)return g.l+w/2;const m=w/(C-1);return g.l+m*u},S=e.chartData.series.flatMap(u=>u.values.filter(m=>m!=null)),W=S.length?Math.max(...S):0,o=Math.max(120,Math.ceil((W||100)/10)*10),i=u=>{const m=Math.min(Math.max(u,0),o);return g.t+x-m/o*x},s=[],v=5;for(let u=0;u<=v;u++){const m=o/v*u;s.push({y:i(m),label:`${Math.round(m)}%`})}const k=e.chartData.series.map(u=>{let m="",M=!1;return u.values.forEach((H,z)=>{if(H==null){M=!1;return}m+=`${M?"L":"M"} ${D(z)} ${i(H)} `,M=!0}),`<path class="exec-line" d="${m.trim()}" fill="none" stroke="${u.color}" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><title>${u.label}</title></path>`}).join(""),T=e.chartData.series.map(u=>u.values.map((m,M)=>{if(m==null)return"";const H=e.chartData.labels[M]||String(M+1),z=`${m.toFixed(1)}%`;return`<circle class="exec-line__point" cx="${D(M)}" cy="${i(m)}" r="3.4" fill="${u.color}" stroke="#fff" stroke-width="1.2"><title>${u.label} • ${H}: ${z}</title></circle>`}).join("")).join(""),a=s.map(u=>`<line x1="${g.l}" y1="${u.y}" x2="${_-g.r}" y2="${u.y}" stroke="#eef2f7"/>
     <text x="${g.l-6}" y="${u.y+3}" font-size="10" text-anchor="end" fill="#6b7280">${u.label}</text>`).join(""),f=e.chartData.labels.map((u,m)=>`<text x="${D(m)}" y="${$-10}" font-size="10" text-anchor="middle" fill="#6b7280">${u}</text>`).join("");y.innerHTML=`
    <svg class="exec-chart-svg" viewBox="0 0 ${_} ${$}" preserveAspectRatio="none" role="img" aria-label="Linhas mensais de atingimento por seção">
      <rect x="0" y="0" width="${_}" height="${$}" fill="white"/>
      ${a}
      ${k}
      ${T}
      <line x1="${g.l}" y1="${$-g.b}" x2="${_-g.r}" y2="${$-g.b}" stroke="#e5e7eb"/>
      ${f}
    </svg>`};return Q(()=>e.chartData,()=>{p()},{deep:!0}),U(()=>{p()}),(y,_)=>(n(),c("div",re,[t("div",ce,[_[0]||(_[0]=t("h3",{id:"exec-chart-title"},"Evolução mensal por seção",-1)),t("div",de,[(n(!0),c(G,null,F(l.chartData.series,$=>(n(),c("span",{key:$.id,class:"legend-item"},[t("span",{class:"legend-swatch legend-swatch--line",style:P({background:$.color,borderColor:$.color})},null,4),N(" "+h($.label),1)]))),128))])]),t("div",{ref_key:"containerRef",ref:d,id:"exec-chart",class:"chart"},null,512)]))}}),me=B(ue,[["__scopeId","data-v-7b88c6b0"]]),ve={id:"exec-kpis",class:"exec-kpis"},he={class:"kpi-card"},pe={class:"kpi-card__value"},_e=["title"],ge=["title"],fe={class:"kpi-card__bar"},xe={class:"kpi-card__pct"},ke={class:"kpi-card"},be=["title"],$e={class:"kpi-card"},ye={class:"kpi-card__value"},we=["title"],Le=["title"],Ge={class:"kpi-card__bar"},De={class:"kpi-card__pct"},Me=j({__name:"ExecKPIs",props:{kpis:{}},setup(l){const e=l,{getCurrentMonthBusinessSnapshot:r}=oe(),d=b(()=>e.kpis.meta_mens===0?0:e.kpis.real_mens/e.kpis.meta_mens*100),p=b(()=>e.kpis.meta_mens-e.kpis.real_mens),y=b(()=>{const w=r.value,{total:x,elapsed:C}=w;return C<=0?e.kpis.real_mens:e.kpis.real_mens/C*x}),_=b(()=>e.kpis.meta_mens===0?0:y.value/e.kpis.meta_mens*100),$=w=>w<50?"att-low":w<100?"att-warn":"att-ok",g=w=>w>=0?"def-pos":"def-neg";return(w,x)=>(n(),c("div",ve,[t("div",he,[x[1]||(x[1]=t("div",{class:"kpi-card__title"},"Atingimento mensal",-1)),t("div",pe,[t("span",{title:L(E)(l.kpis.real_mens)},h(L(I)(l.kpis.real_mens)),9,_e),t("small",null,[x[0]||(x[0]=N("/ ",-1)),t("span",{title:L(E)(l.kpis.meta_mens)},h(L(I)(l.kpis.meta_mens)),9,ge)])]),t("div",fe,[t("div",{class:A(["kpi-card__fill",$(d.value)]),style:P({width:`${Math.min(100,Math.max(0,d.value))}%`})},null,6)]),t("div",xe,[t("span",{class:A(["att-badge",$(d.value)])},h(d.value.toFixed(1))+"%",3)])]),t("div",ke,[x[2]||(x[2]=t("div",{class:"kpi-card__title"},"Defasagem",-1)),t("div",{class:A(["kpi-card__value",g(p.value)]),title:L(E)(p.value)},h(L(I)(p.value)),11,be),x[3]||(x[3]=t("div",{class:"kpi-sub muted"},"Meta – Realizado",-1))]),t("div",$e,[x[5]||(x[5]=t("div",{class:"kpi-card__title"},"Forecast",-1)),t("div",ye,[t("span",{title:L(E)(y.value)},h(L(I)(y.value)),9,we),t("small",null,[x[4]||(x[4]=N("/ ",-1)),t("span",{title:L(E)(l.kpis.meta_mens)},h(L(I)(l.kpis.meta_mens)),9,Le)])]),t("div",Ge,[t("div",{class:A(["kpi-card__fill",$(_.value)]),style:P({width:`${Math.min(100,Math.max(0,_.value))}%`})},null,6)]),t("div",De,[t("span",{class:A(["att-badge",$(_.value)])},h(_.value.toFixed(1))+"%",3)])])]))}}),Fe=B(Me,[["__scopeId","data-v-a1b144c9"]]),Ae={class:"exec-panel"},Ee={class:"exec-h"},Ce={class:"rank-mini"},Te={class:"rank-mini__name"},Re={class:"rank-mini__label"},Se={class:"rank-mini__bar"},Ie={class:"rank-mini__pct"},Pe={class:"rank-mini__vals"},Ve=["title"],Be=["title"],je=j({__name:"ExecRankingCard",props:{title:{},items:{}},setup(l){const e=r=>r<50?"att-low":r<100?"att-warn":"att-ok";return(r,d)=>(n(),c("div",Ae,[t("div",Ee,[t("h3",null,h(l.title),1)]),t("div",Ce,[(n(!0),c(G,null,F(l.items,(p,y)=>(n(),c("div",{key:p.key,class:"rank-mini__row"},[t("div",Te,[t("span",Re,h(p.label),1)]),t("div",Se,[t("span",{style:P({width:`${Math.min(100,Math.max(0,p.p_mens))}%`})},null,4)]),t("div",Ie,[t("span",{class:A(["att-badge",e(p.p_mens)])},h(p.p_mens.toFixed(1))+"%",3)]),t("div",Pe,[t("strong",{title:L(E)(p.real_mens)},h(L(I)(p.real_mens)),9,Ve),t("small",{title:L(E)(p.meta_mens)},"/ "+h(L(I)(p.meta_mens)),9,Be)])]))),128)),(n(!0),c(G,null,F(Math.max(0,5-l.items.length),p=>(n(),c("div",{key:`empty-${p}`,class:"rank-mini__empty"},[...d[0]||(d[0]=[t("span",null,"Sem dados disponíveis",-1),t("span",null,"—",-1)])]))),128))])]))}}),K=B(je,[["__scopeId","data-v-7e4fdf79"]]),We={class:"exec-panel"},He={class:"exec-h"},ze={id:"exec-status-list",class:"list-mini"},qe={class:"list-mini__name"},Ne={class:"list-mini__val"},Oe={key:0,class:"def-badge def-neg"},Ke={key:1,class:"att-badge att-ok"},Qe={key:2,class:"att-badge att-warn"},Ue=j({__name:"ExecStatusCard",props:{title:{},items:{},type:{}},setup(l){return(e,r)=>(n(),c("div",We,[t("div",He,[t("h3",null,h(l.title),1)]),t("div",ze,[(n(!0),c(G,null,F(l.items,(d,p)=>(n(),c("div",{key:d.key,class:"list-mini__row"},[t("div",qe,h(d.label),1),t("div",Ne,[l.type==="longe"?(n(),c("span",Oe,h(L(I)(d.gap||0)),1)):l.type==="hit"?(n(),c("span",Ke,h(d.p_mens.toFixed(1))+"% ",1)):(n(),c("span",Qe,h(d.p_mens.toFixed(1))+"% ",1))])]))),128)),(n(!0),c(G,null,F(Math.max(0,5-l.items.length),d=>(n(),c("div",{key:`empty-${d}`,class:"list-mini__empty"},[...r[0]||(r[0]=[t("span",null,"Sem dados disponíveis",-1),t("span",null,"—",-1)])]))),128))])]))}}),q=B(Ue,[["__scopeId","data-v-1f024593"]]),Xe={class:"exec-panel"},Ye={class:"exec-h"},Je={id:"exec-heatmap-title"},Ze={key:0},ea={key:1},aa={class:"exec-controls"},ta={id:"exec-heatmap-mode-toggle",class:"seg-mini segmented"},sa={key:0,class:"hm-empty-state"},la={key:1,id:"exec-heatmap",class:"exec-heatmap"},oa={class:"hm-cell hm-corner"},ia={class:"hm-corner-label"},na={class:"hm-corner-sublabel"},ra=["title"],ca=["title"],da={key:0,class:"hm-cell hm-col"},ua=["title"],ma={class:"hm-rowh-text"},va=["title"],ha={class:"hm-val-text"},pa=["title"],_a={class:"hm-val-text"},ga=["title"],fa={class:"hm-rowh-text"},xa={key:0,class:"hm-cell hm-val hm-empty"},ka=["title"],ba={class:"hm-val-text"},$a=j({__name:"ExecHeatmap",props:{heatmap:{},filters:{}},setup(l){const e=l,r=V("secoes"),d=b(()=>e.heatmap.sectionsFamilia.filter(o=>o.id!=="META")),p=b(()=>{const o=e.filters||{};if(r.value==="metas")return e.heatmap.units.filter(s=>s.value==="DIR_ALL"||s.value==="REG_ALL"||s.value==="AG_ALL"||s.value==="GG_ALL"||s.value==="G_ALL"||s.value.startsWith("DIR_")||s.value.startsWith("REG_")||s.value.startsWith("AG_")||s.value.startsWith("GG_")||s.value.startsWith("G_")||s.value.startsWith("G_ALL_GG_")||s.value.startsWith("GG_ALL_AG_")||s.value.startsWith("AG_ALL_REG_"));let i=null;if(o.gerente&&o.gerente.toLowerCase()!=="todos"){if((e.heatmap.sectionsIndicador||[]).length>0)return[];i="G_"}else o.ggestao&&o.ggestao.toLowerCase()!=="todos"?i="G_":o.agencia&&o.agencia.toLowerCase()!=="todas"?i="GG_":o.gerencia&&o.gerencia.toLowerCase()!=="todas"?i="AG_":i="REG_";return i?e.heatmap.units.filter(s=>s.value!=="DIR_ALL"&&s.value!=="REG_ALL"&&s.value!=="AG_ALL"&&s.value!=="GG_ALL"&&s.value!=="G_ALL"&&s.value.startsWith(i)):e.heatmap.units.filter(s=>s.value!=="DIR_ALL"&&s.value!=="REG_ALL"&&s.value!=="AG_ALL"&&s.value!=="GG_ALL"&&s.value!=="G_ALL"&&!s.value.startsWith("REG_")&&!s.value.startsWith("AG_")&&!s.value.startsWith("GG_")&&!s.value.startsWith("G_"))}),y=b(()=>{const o=e.filters||{};return o.gerente&&o.gerente.toLowerCase()!=="todos"?(e.heatmap.sectionsIndicador||[]).length>0:!1}),_=b(()=>e.heatmap.sectionsIndicador||[]),$=(o,i,s=!1)=>{const v=`${o}|${i}`;return s?e.heatmap.dataIndicador[v]||null:e.heatmap.dataFamilia[v]||null},g=(o,i,s=!1)=>{const v=$(o,i,s);if(!v||v.meta<=0)return{pct:null,text:"—"};const k=v.real/v.meta*100;return{pct:k,text:`${Math.round(k)}%`}},w=(o,i)=>{const s=`${o}|META|${i}`;return e.heatmap.dataFamiliaMensal[s]||null},x=(o,i)=>{if(i===0)return{delta:null,text:"—",class:"hm-empty"};const s=e.heatmap.months[i],v=e.heatmap.months[i-1];if(!s||!v)return{delta:null,text:"—",class:"hm-empty"};const k=w(o,s.key),T=w(o,v.key);if(!k||!T)return{delta:null,text:"—",class:"hm-empty"};const a=k.meta,f=T.meta;if(f===0)return a===0?{delta:0,text:"0.0%",class:"hm-ok"}:{delta:null,text:"—",class:"hm-empty"};const u=(a-f)/f*100;let m="hm-ok";u<0?m="hm-down":u>=0&&u<=5?m="hm-ok":u>5&&u<=10?m="hm-warn":m="hm-alert";const M=u>0?"+":"";return{delta:u,text:`${M}${u.toFixed(1)}%`,class:m}},C=o=>o===null?"hm-empty":o<50?"hm-bad":o<100?"hm-warn":"hm-ok",D=(o,i)=>{const s=e.heatmap.units.find(M=>M.value===o)?.label||o,v=e.heatmap.months[i],k=i>0?e.heatmap.months[i-1]:null;if(!v)return s;const T=w(o,v.key),a=k?w(o,k.key):null,f=T?.meta||0,u=a?.meta||0;let m=`Meta ${v.label}: ${E(f)}`;if(k){m+=`
Anterior (${k.label}): ${E(u)}`;const M=x(o,i);M.delta!==null&&(m+=`
Variação: ${M.text}`)}return m},S=(o,i,s,v,k=!1)=>{const T=k?_.value.find(f=>f.id===o)?.label||o:e.heatmap.units.find(f=>f.value===o)?.label||o,a=d.value.find(f=>f.id===i)?.label||i;{const f=$(o,i,k),u=g(o,i,k);let m=`${T} × ${a}

`;return m+=`Atingimento: ${u.text}`,f&&(m+=`
Real: ${E(f.real||0)}`,m+=`
Meta: ${E(f.meta||0)}`),m}},W=b(()=>e.heatmap.sectionsFamilia.length>0&&(Object.keys(e.heatmap.dataFamilia).length>0||Object.keys(e.heatmap.dataFamiliaMensal).length>0));return b(()=>Object.keys(e.heatmap.dataFamiliaMensal).length>0),(o,i)=>(n(),c("div",Xe,[t("div",Ye,[t("h3",Je,[r.value==="secoes"?(n(),c("span",Ze,"Heatmap — GR × Seções")):(n(),c("span",ea,"Heatmap — Variação da meta (mês a mês)"))]),t("div",aa,[t("div",ta,[t("button",{class:A(["seg-btn",{"is-active":r.value==="secoes"}]),onClick:i[0]||(i[0]=s=>r.value="secoes"),title:"Visualizar por Seções"}," Seções ",2),t("button",{class:A(["seg-btn",{"is-active":r.value==="metas"}]),onClick:i[1]||(i[1]=s=>r.value="metas"),title:"Visualizar Variação de Meta"}," Meta ",2)])])]),W.value?(n(),c("div",la,[t("div",{class:"hm-row hm-head",style:P(`--hm-cols: ${r.value==="metas"?l.heatmap.months.length:d.value.length}; --hm-first: 200px; --hm-cell: ${r.value==="metas"?"100px":"140px"}`)},[t("div",oa,[t("span",ia,h(r.value==="metas"?"Hierarquia":y.value?"Indicador \\ Família":"GR \\ Família"),1),t("span",na,"\\ "+h(r.value==="metas"?"Mês":"Famílias"),1)]),r.value==="metas"?(n(!0),c(G,{key:0},F(l.heatmap.months,s=>(n(),c("div",{key:s.key,class:"hm-cell hm-col",title:s.label},h(s.label),9,ra))),128)):(n(),c(G,{key:1},[(n(!0),c(G,null,F(d.value,s=>(n(),c("div",{key:s.id,class:"hm-cell hm-col",title:s.label},h(s.label),9,ca))),128)),d.value.length===0?(n(),c("div",da," Meta Total ")):te("",!0)],64))],4),y.value?(n(!0),c(G,{key:1},F(_.value,s=>(n(),c("div",{key:s.id,class:"hm-row",style:P(`--hm-cols: ${r.value==="metas"?l.heatmap.months.length:d.value.length}; --hm-first: 200px; --hm-cell: ${r.value==="metas"?"100px":"140px"}`)},[t("div",{class:"hm-cell hm-rowh",title:s.label},[t("span",fa,h(s.label),1)],8,ga),r.value==="metas"?(n(),c("div",xa,[...i[3]||(i[3]=[t("span",{class:"hm-val-text"},"—",-1)])])):(n(!0),c(G,{key:1},F(d.value,v=>(n(),c("div",{key:v.id,class:A(["hm-cell hm-val",C(g(s.id,v.id,!0).pct)]),title:S(s.id,v.id,void 0,void 0,!0)},[t("span",ba,h(g(s.id,v.id,!0).text),1)],10,ka))),128))],4))),128)):(n(!0),c(G,{key:0},F(p.value,s=>(n(),c("div",{key:s.value,class:"hm-row",style:P(`--hm-cols: ${r.value==="metas"?l.heatmap.months.length:d.value.length}; --hm-first: 200px; --hm-cell: ${r.value==="metas"?"100px":"140px"}`)},[t("div",{class:"hm-cell hm-rowh",title:s.label},[t("span",ma,h(s.label),1)],8,ua),r.value==="metas"?(n(!0),c(G,{key:0},F(l.heatmap.months,(v,k)=>(n(),c("div",{key:v.key,class:A(["hm-cell hm-val",x(s.value,k).class]),title:D(s.value,k)},[t("span",ha,h(x(s.value,k).text),1)],10,va))),128)):(n(!0),c(G,{key:1},F(d.value,v=>(n(),c("div",{key:v.id,class:A(["hm-cell hm-val",C(g(s.value,v.id).pct)]),title:S(s.value,v.id)},[t("span",_a,h(g(s.value,v.id).text),1)],10,pa))),128))],4))),128))])):(n(),c("div",sa,[...i[2]||(i[2]=[t("p",null,"Nenhum dado disponível para os filtros selecionados.",-1)])]))]))}}),ya=B($a,[["__scopeId","data-v-31970116"]]),wa={class:"exec-wrapper"},La={id:"view-exec",class:"exec-view"},Ga={class:"exec-header"},Da={id:"exec-context",class:"exec-context"},Ma=["disabled"],Fa={class:"exec-panels"},Aa={class:"exec-ranking-cards"},Ea={class:"exec-status-cards"},Ca=j({__name:"VisaoExecutiva",setup(l){const{filterState:e,period:r}=X(),d=V(null),p=V(!1),y=V(null),_=V(!1),$=b(()=>d.value?.kpis||{real_mens:0,meta_mens:0,real_acum:0,meta_acum:0}),g=b(()=>d.value?.ranking||[]),w=b(()=>d.value?.status||{hit:[],quase:[],longe:[]}),x=b(()=>d.value?.chart||{keys:[],labels:[],series:[]}),C=b(()=>d.value?.heatmap||{units:[],sectionsFamilia:[],sectionsIndicador:[],dataFamilia:{},dataIndicador:{},dataFamiliaMensal:{},dataIndicadorMensal:{},months:[]}),D=b(()=>{const a={};return e.value.segmento&&e.value.segmento.toLowerCase()!=="todos"&&(a.segmento=e.value.segmento),e.value.diretoria&&e.value.diretoria.toLowerCase()!=="todas"&&(a.diretoria=e.value.diretoria),e.value.gerencia&&e.value.gerencia.toLowerCase()!=="todas"&&(a.regional=e.value.gerencia),e.value.agencia&&e.value.agencia.toLowerCase()!=="todas"&&(a.agencia=e.value.agencia),e.value.ggestao&&e.value.ggestao.toLowerCase()!=="todos"&&(a.gerenteGestao=e.value.ggestao),e.value.gerente&&e.value.gerente.toLowerCase()!=="todos"&&(a.gerente=e.value.gerente),e.value.familia&&e.value.familia.toLowerCase()!=="todas"&&(a.familia=e.value.familia),e.value.indicador&&e.value.indicador.toLowerCase()!=="todos"&&(a.indicador=e.value.indicador),e.value.subindicador&&e.value.subindicador.toLowerCase()!=="todos"&&(a.subindicador=e.value.subindicador),r.value?.start&&(a.dataInicio=r.value.start),r.value?.end&&(a.dataFim=r.value.end),a}),S=b(()=>[...g.value].sort((a,f)=>f.p_mens-a.p_mens).slice(0,5)),W=b(()=>[...g.value].sort((a,f)=>a.p_mens-f.p_mens).slice(0,5).reverse()),o=b(()=>{const a=e.value;return a.gerente&&a.gerente!=="Todos"?"Desempenho por Família":a.ggestao&&a.ggestao!=="Todos"?"Desempenho por Gerente":a.agencia&&a.agencia!=="Todas"?"Desempenho por Gerente de Gestão":a.gerencia&&a.gerencia!=="Todas"?"Desempenho por Agência":a.diretoria&&a.diretoria!=="Todas"?"Desempenho por Regional":a.segmento&&a.segmento!=="Todos"?"Desempenho por Diretoria":"Desempenho por Regional"}),i=b(()=>{const a=e.value;return a.gerente&&a.gerente!=="Todos"?"Status por Família":a.ggestao&&a.ggestao!=="Todos"?"Status por Gerente":a.agencia&&a.agencia!=="Todas"?"Status por Gerente de Gestão":a.gerencia&&a.gerencia!=="Todas"?"Status por Agência":a.diretoria&&a.diretoria!=="Todas"?"Status por Regional":a.segmento&&a.segmento!=="Todos"?"Status por Diretoria":"Status por Regional"}),s=async()=>{p.value=!0,y.value=null;try{const a=await ne(D.value);a?d.value=a:y.value="Erro ao carregar dados executivos"}catch(a){y.value=a instanceof Error?a.message:"Erro desconhecido",console.error("Erro ao carregar dados executivos:",a)}finally{p.value=!1}};Q([D,r],()=>{D.value.segmento||D.value.diretoria||D.value.regional||D.value.agencia||D.value.gerenteGestao||D.value.gerente||(d.value=null,y.value=null),s()},{deep:!0}),U(()=>{s()});const v=b(()=>{const a=e.value;return`${a.gerente&&a.gerente!=="Todos"?`Gerente: ${a.gerente}`:a.ggestao&&a.ggestao!=="Todos"?`GG: ${a.ggestao}`:a.agencia&&a.agencia!=="Todas"?`Agência: ${a.agencia}`:a.gerencia&&a.gerencia!=="Todas"?`GR: ${a.gerencia}`:a.diretoria&&a.diretoria!=="Todas"?`Diretoria: ${a.diretoria}`:"Todas as Diretorias"} · Período: ${O(r.value.start)} a ${O(r.value.end)}`}),{exportToPDF:k}=ie(),T=async()=>{if(!_.value){_.value=!0;try{await k("view-exec")}catch(a){console.error("Erro ao gerar PDF:",a),alert("Erro ao gerar PDF. Tente novamente.")}finally{_.value=!1}}};return(a,f)=>(n(),c("div",wa,[t("div",La,[p.value?(n(),c(G,{key:0},[f[0]||(f[0]=se('<div class="skeleton skeleton--context" style="height:24px;width:200px;margin-bottom:24px;border-radius:6px;" data-v-daa38bb7></div><div class="exec-kpis" data-v-daa38bb7><div class="skeleton skeleton--kpi-card" style="height:140px;border-radius:12px;" data-v-daa38bb7></div><div class="skeleton skeleton--kpi-card" style="height:140px;border-radius:12px;" data-v-daa38bb7></div><div class="skeleton skeleton--kpi-card" style="height:140px;border-radius:12px;" data-v-daa38bb7></div></div><div class="exec-chart" style="margin-top:24px;" data-v-daa38bb7><div class="skeleton skeleton--chart-title" style="height:24px;width:250px;margin-bottom:16px;border-radius:6px;" data-v-daa38bb7></div><div class="skeleton skeleton--chart" style="height:300px;width:100%;border-radius:12px;" data-v-daa38bb7></div></div><div class="exec-panels" style="margin-top:24px;" data-v-daa38bb7><div class="exec-ranking-cards" style="display:grid;grid-template-columns:1fr 1fr;gap:18px;margin-bottom:18px;" data-v-daa38bb7><div class="skeleton skeleton--panel" style="height:400px;border-radius:12px;" data-v-daa38bb7></div><div class="skeleton skeleton--panel" style="height:400px;border-radius:12px;" data-v-daa38bb7></div></div><div class="exec-status-cards" style="display:grid;grid-template-columns:repeat(3, 1fr);gap:18px;" data-v-daa38bb7><div class="skeleton skeleton--panel" style="height:350px;border-radius:12px;" data-v-daa38bb7></div><div class="skeleton skeleton--panel" style="height:350px;border-radius:12px;" data-v-daa38bb7></div><div class="skeleton skeleton--panel" style="height:350px;border-radius:12px;" data-v-daa38bb7></div></div></div><div class="exec-heatmap-skeleton" style="margin-top:24px;" data-v-daa38bb7><div class="skeleton skeleton--panel" style="height:400px;border-radius:12px;" data-v-daa38bb7></div></div>',5))],64)):(n(),c(G,{key:1},[y.value?(n(),le(J,{key:0,message:y.value},null,8,["message"])):(n(),c(G,{key:1},[t("div",Ga,[t("div",Da,[t("strong",null,h(v.value),1)]),t("button",{class:"btn-download-pdf",onClick:T,disabled:_.value,title:"Baixar como PDF"},[R(ae,{name:_.value?"loader-2":"download",size:20,color:"white",class:A({spinning:_.value})},null,8,["name","class"]),t("span",null,h(_.value?"Gerando PDF...":"Baixar PDF"),1)],8,Ma)]),R(Fe,{kpis:$.value},null,8,["kpis"]),R(me,{"chart-data":x.value},null,8,["chart-data"]),t("div",Fa,[t("div",Aa,[R(K,{title:`${o.value} - Top 5`,items:S.value},null,8,["title","items"]),R(K,{title:`${o.value} - Bottom 5`,items:W.value},null,8,["title","items"])]),t("div",Ea,[R(q,{title:`${i.value} - Atingidas`,items:w.value.hit,type:"hit"},null,8,["title","items"]),R(q,{title:`${i.value} - Quase lá`,items:w.value.quase,type:"quase"},null,8,["title","items"]),R(q,{title:`${i.value} - Longe`,items:w.value.longe,type:"longe"},null,8,["title","items"])])]),R(ya,{heatmap:C.value,filters:L(e)},null,8,["heatmap","filters"])],64))],64))])]))}}),za=B(Ca,[["__scopeId","data-v-daa38bb7"]]);export{za as default};
