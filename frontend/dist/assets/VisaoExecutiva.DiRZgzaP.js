import{u as W}from"./useGlobalFilters.CgxjVgBC.js";import{h as X}from"./pdf-vendor.BFzd3waL.js";import{g as b,f as P,i as N}from"./formatUtils.SsKD9Isb.js";import{a as J,A as U,_ as S,I as Z}from"./index._pwAkkZ8.js";import{b as H,e as D,r as A,w as Y,y as Q,m as c,q as e,F as x,D as M,o as d,C as q,L as B,E as h,u as w,k as I,M as K,t as G}from"./vendor.Mb-DmQZ9.js";import"./calendarioService.CWAO-pW1.js";import"./icons-vendor.vP8HAgRq.js";import"./vue-router.BEbJbLaE.js";function ee(){return{exportToPDF:async(a,o)=>{let t=null;if(typeof a=="string"?t=document.querySelector(`#${a}`):a instanceof HTMLElement?t=a:a&&"value"in a&&(t=a.value),!t)throw console.error("Elemento não encontrado"),new Error("Elemento não encontrado");const r=o||`visao-executiva-${new Date().toISOString().split("T")[0]}.pdf`,F={margin:[10,10,10,10],filename:r,image:{type:"jpeg",quality:.98},html2canvas:{scale:2,useCORS:!0,logging:!1,backgroundColor:"#ffffff"},jsPDF:{unit:"mm",format:"a4",orientation:"landscape"},pagebreak:{mode:["avoid-all","css","legacy"]}};try{await X().set(F).from(t).save()}catch(p){throw console.error("Erro ao gerar PDF:",p),p}}}}async function ae(l){const a={};l&&(l.segmento&&(a.segmento=l.segmento),l.diretoria&&(a.diretoria=l.diretoria),l.regional&&(a.regional=l.regional),l.agencia&&(a.agencia=l.agencia),l.gerenteGestao&&(a.gerenteGestao=l.gerenteGestao),l.gerente&&(a.gerente=l.gerente),l.dataInicio&&(a.dataInicio=l.dataInicio),l.dataFim&&(a.dataFim=l.dataFim));const o=await J(U.EXEC,a);return o.success&&o.data?o.data:(console.error("Erro ao buscar dados executivos:",o.error),null)}const te={class:"exec-chart"},se={class:"exec-head"},le={id:"exec-chart-legend",class:"chart-legend"},ne=H({__name:"ExecChart",props:{chartData:{}},setup(l){const a=l,o=D(()=>a.chartData.series.length>0),t=A(null),r=()=>{if(!t.value||!o.value)return;const F=t.value,p=900,y=260,_={t:28,r:36,b:48,l:64},$=p-_.l-_.r,T=y-_.t-_.b,V=a.chartData.labels.length,j=u=>{if(V<=1)return _.l+$/2;const v=$/(V-1);return _.l+v*u},R=a.chartData.series.flatMap(u=>u.values.filter(v=>v!=null)),g=R.length?Math.max(...R):0,m=Math.max(120,Math.ceil((g||100)/10)*10),s=u=>{const v=Math.min(Math.max(u,0),m);return _.t+T-v/m*T},i=[],f=5;for(let u=0;u<=f;u++){const v=m/f*u;i.push({y:s(v),label:`${Math.round(v)}%`})}const n=a.chartData.series.map(u=>{let v="",L=!1;return u.values.forEach((O,z)=>{if(O==null){L=!1;return}v+=`${L?"L":"M"} ${j(z)} ${s(O)} `,L=!0}),`<path class="exec-line" d="${v.trim()}" fill="none" stroke="${u.color}" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><title>${u.label}</title></path>`}).join(""),k=a.chartData.series.map(u=>u.values.map((v,L)=>{if(v==null)return"";const O=a.chartData.labels[L]||String(L+1),z=`${v.toFixed(1)}%`;return`<circle class="exec-line__point" cx="${j(L)}" cy="${s(v)}" r="3.4" fill="${u.color}" stroke="#fff" stroke-width="1.2"><title>${u.label} • ${O}: ${z}</title></circle>`}).join("")).join(""),C=i.map(u=>`<line x1="${_.l}" y1="${u.y}" x2="${p-_.r}" y2="${u.y}" stroke="#eef2f7"/>
     <text x="${_.l-6}" y="${u.y+3}" font-size="10" text-anchor="end" fill="#6b7280">${u.label}</text>`).join(""),E=a.chartData.labels.map((u,v)=>`<text x="${j(v)}" y="${y-10}" font-size="10" text-anchor="middle" fill="#6b7280">${u}</text>`).join("");F.innerHTML=`
    <svg class="exec-chart-svg" viewBox="0 0 ${p} ${y}" preserveAspectRatio="none" role="img" aria-label="Linhas mensais de atingimento por seção">
      <rect x="0" y="0" width="${p}" height="${y}" fill="white"/>
      ${C}
      ${n}
      ${k}
      <line x1="${_.l}" y1="${y-_.b}" x2="${p-_.r}" y2="${y-_.b}" stroke="#e5e7eb"/>
      ${E}
    </svg>`};return Y(()=>a.chartData,()=>{r()},{deep:!0}),Q(()=>{r()}),(F,p)=>(d(),c("div",te,[e("div",se,[p[0]||(p[0]=e("h3",{id:"exec-chart-title"},"Evolução mensal por seção",-1)),e("div",le,[(d(!0),c(x,null,M(l.chartData.series,y=>(d(),c("span",{key:y.id,class:"legend-item"},[e("span",{class:"legend-swatch legend-swatch--line",style:B({background:y.color,borderColor:y.color})},null,4),q(" "+h(y.label),1)]))),128))])]),e("div",{ref_key:"containerRef",ref:t,id:"exec-chart",class:"chart"},null,512)]))}}),ie=S(ne,[["__scopeId","data-v-7b88c6b0"]]),oe={id:"exec-kpis",class:"exec-kpis"},re={class:"kpi-card"},ce={class:"kpi-card__value"},de=["title"],ue=["title"],me={class:"kpi-card__bar"},ve={class:"kpi-card__pct"},he={class:"kpi-card"},pe=["title"],_e={class:"kpi-card"},ge={class:"kpi-card__value"},ke=["title"],$e=["title"],xe={class:"kpi-card__bar"},fe={class:"kpi-card__pct"},be=H({__name:"ExecKPIs",props:{kpis:{}},setup(l){const a=l,o=D(()=>a.kpis.meta_mens===0?0:a.kpis.real_mens/a.kpis.meta_mens*100),t=D(()=>a.kpis.meta_mens-a.kpis.real_mens),r=D(()=>{const _=new Date().getDate(),$=new Date(new Date().getFullYear(),new Date().getMonth()+1,0).getDate();return a.kpis.real_mens/Math.max(_,1)*$}),F=D(()=>a.kpis.meta_mens===0?0:r.value/a.kpis.meta_mens*100),p=_=>_<50?"att-low":_<100?"att-warn":"att-ok",y=_=>_>=0?"def-pos":"def-neg";return(_,$)=>(d(),c("div",oe,[e("div",re,[$[1]||($[1]=e("div",{class:"kpi-card__title"},"Atingimento mensal",-1)),e("div",ce,[e("span",{title:w(b)(l.kpis.real_mens)},h(w(P)(l.kpis.real_mens)),9,de),e("small",null,[$[0]||($[0]=q("/ ",-1)),e("span",{title:w(b)(l.kpis.meta_mens)},h(w(P)(l.kpis.meta_mens)),9,ue)])]),e("div",me,[e("div",{class:I(["kpi-card__fill",p(o.value)]),style:B({width:`${Math.min(100,Math.max(0,o.value))}%`})},null,6)]),e("div",ve,[e("span",{class:I(["att-badge",p(o.value)])},h(o.value.toFixed(1))+"%",3)])]),e("div",he,[$[2]||($[2]=e("div",{class:"kpi-card__title"},"Defasagem do mês",-1)),e("div",{class:I(["kpi-card__value",y(t.value)]),title:w(b)(t.value)},h(w(P)(t.value)),11,pe),$[3]||($[3]=e("div",{class:"kpi-sub muted"},"Meta – Real (mês)",-1))]),e("div",_e,[$[5]||($[5]=e("div",{class:"kpi-card__title"},"Forecast x Meta",-1)),e("div",ge,[e("span",{title:w(b)(r.value)},h(w(P)(r.value)),9,ke),e("small",null,[$[4]||($[4]=q("/ ",-1)),e("span",{title:w(b)(l.kpis.meta_mens)},h(w(P)(l.kpis.meta_mens)),9,$e)])]),e("div",xe,[e("div",{class:I(["kpi-card__fill",p(F.value)]),style:B({width:`${Math.min(100,Math.max(0,F.value))}%`})},null,6)]),e("div",fe,[e("span",{class:I(["att-badge",p(F.value)])},h(F.value.toFixed(1))+"%",3)])])]))}}),ye=S(be,[["__scopeId","data-v-78d30c98"]]),we={class:"exec-panel"},Me={class:"exec-rankings"},De={class:"rank-section"},Fe={id:"exec-rank-top",class:"rank-mini"},Ee={class:"rank-mini__name"},Ce={class:"rank-mini__label"},Ie={class:"rank-mini__bar"},Le={class:"rank-mini__pct"},Re={class:"rank-mini__vals"},Pe=["title"],Te=["title"],Ve={class:"rank-section"},je={id:"exec-rank-bottom",class:"rank-mini"},Ae={class:"rank-mini__name"},Be={class:"rank-mini__label"},Ge={class:"rank-mini__bar"},Se={class:"rank-mini__pct"},He={class:"rank-mini__vals"},Oe=["title"],ze=["title"],qe=H({__name:"ExecRankings",props:{topRanking:{},bottomRanking:{}},setup(l){const a=o=>o<50?"att-low":o<100?"att-warn":"att-ok";return(o,t)=>(d(),c("div",we,[t[2]||(t[2]=e("div",{class:"exec-h"},[e("h3",{id:"exec-rank-title"},"Desempenho por Regional")],-1)),e("div",Me,[e("div",De,[t[0]||(t[0]=e("h4",null,"Top 5",-1)),e("div",Fe,[(d(!0),c(x,null,M(l.topRanking,r=>(d(),c("div",{key:r.key,class:"rank-mini__row"},[e("div",Ee,[e("span",Ce,h(r.label),1)]),e("div",Ie,[e("span",{style:B({width:`${Math.min(100,Math.max(0,r.p_mens))}%`})},null,4)]),e("div",Le,[e("span",{class:I(["att-badge",a(r.p_mens)])},h(r.p_mens.toFixed(1))+"%",3)]),e("div",Re,[e("strong",{title:w(b)(r.real_mens)},h(w(P)(r.real_mens)),9,Pe),e("small",{title:w(b)(r.meta_mens)},"/ "+h(w(P)(r.meta_mens)),9,Te)])]))),128))])]),e("div",Ve,[t[1]||(t[1]=e("h4",null,"Bottom 5",-1)),e("div",je,[(d(!0),c(x,null,M(l.bottomRanking,r=>(d(),c("div",{key:r.key,class:"rank-mini__row"},[e("div",Ae,[e("span",Be,h(r.label),1)]),e("div",Ge,[e("span",{style:B({width:`${Math.min(100,Math.max(0,r.p_mens))}%`})},null,4)]),e("div",Se,[e("span",{class:I(["att-badge",a(r.p_mens)])},h(r.p_mens.toFixed(1))+"%",3)]),e("div",He,[e("strong",{title:w(b)(r.real_mens)},h(w(P)(r.real_mens)),9,Oe),e("small",{title:w(b)(r.meta_mens)},"/ "+h(w(P)(r.meta_mens)),9,ze)])]))),128))])])])]))}}),Ne=S(qe,[["__scopeId","data-v-c96ec2a9"]]),Ye={class:"exec-panel"},Qe={class:"exec-status"},We={class:"status-section"},Xe={id:"exec-status-hit",class:"list-mini"},Je={class:"list-mini__name"},Ue={class:"list-mini__val"},Ze={class:"att-badge att-ok"},Ke={class:"status-section"},ea={id:"exec-status-quase",class:"list-mini"},aa={class:"list-mini__name"},ta={class:"list-mini__val"},sa={class:"att-badge att-warn"},la={class:"status-section"},na={id:"exec-status-longe",class:"list-mini"},ia={class:"list-mini__name"},oa={class:"list-mini__val"},ra={class:"def-badge def-neg"},ca=H({__name:"ExecStatus",props:{status:{}},setup(l){return(a,o)=>(d(),c("div",Ye,[o[3]||(o[3]=e("div",{class:"exec-h"},[e("h3",{id:"exec-status-title"},"Status das Regionais")],-1)),e("div",Qe,[e("div",We,[o[0]||(o[0]=e("h4",null,"Hit (≥100%)",-1)),e("div",Xe,[(d(!0),c(x,null,M(l.status.hit,t=>(d(),c("div",{key:t.key,class:"list-mini__row"},[e("div",Je,h(t.label),1),e("div",Ue,[e("span",Ze,h(t.p_mens.toFixed(1))+"%",1)])]))),128))])]),e("div",Ke,[o[1]||(o[1]=e("h4",null,"Quase (90-99%)",-1)),e("div",ea,[(d(!0),c(x,null,M(l.status.quase,t=>(d(),c("div",{key:t.key,class:"list-mini__row"},[e("div",aa,h(t.label),1),e("div",ta,[e("span",sa,h(t.p_mens.toFixed(1))+"%",1)])]))),128))])]),e("div",la,[o[2]||(o[2]=e("h4",null,"Longe (maior defasagem)",-1)),e("div",na,[(d(!0),c(x,null,M(l.status.longe,t=>(d(),c("div",{key:t.key,class:"list-mini__row"},[e("div",ia,h(t.label),1),e("div",oa,[e("span",ra,h(w(P)(t.gap||0)),1)])]))),128))])])])]))}}),da=S(ca,[["__scopeId","data-v-0c5b01ca"]]),ua={class:"exec-panel"},ma={class:"exec-h"},va={id:"exec-heatmap-title"},ha={class:"exec-controls"},pa={id:"exec-heatmap-view-toggle",class:"seg-mini segmented"},_a={id:"exec-heatmap-mode-toggle",class:"seg-mini segmented"},ga={key:0,class:"hm-empty-state"},ka={key:1,id:"exec-heatmap",class:"exec-heatmap"},$a={class:"hm-cell hm-corner"},xa={class:"hm-corner-sublabel"},fa=["title"],ba={class:"hm-col-content"},ya={class:"hm-col-section"},wa={class:"hm-col-month"},Ma=["title"],Da={class:"hm-col-content"},Fa={class:"hm-col-section"},Ea={class:"hm-col-month"},Ca=["title"],Ia=["title"],La={class:"hm-rowh-text"},Ra=["title"],Pa={class:"hm-val-text"},Ta=["title"],Va={class:"hm-val-text"},ja=["title"],Aa={class:"hm-val-text"},Ba=H({__name:"ExecHeatmap",props:{heatmap:{}},setup(l){const a=l,o=A("familia"),t=A("atingimento"),r=D(()=>o.value==="familia"?a.heatmap.sectionsFamilia:a.heatmap.sectionsIndicador),F=(g,m)=>{const s=`${g}|${m}`;return o.value==="familia"?a.heatmap.dataFamilia[s]||null:a.heatmap.dataIndicador[s]||null},p=(g,m,s)=>{const i=`${g}|${m}|${s}`;return o.value==="familia"?a.heatmap.dataFamiliaMensal[i]||null:a.heatmap.dataIndicadorMensal[i]||null},y=(g,m)=>{const s=F(g,m);if(!s)return{pct:null,text:b(0)};if(s.meta>0){const i=s.real/s.meta*100;return{pct:i,text:`${Math.round(i)}%`}}return{pct:null,text:b(s.real||0)}},_=(g,m,s)=>{const i=p(g,m,s);if(!i)return{pct:null,text:b(0)};if(i.meta>0){const f=i.real/i.meta*100;return{pct:f,text:`${Math.round(f)}%`}}return{pct:null,text:b(i.real||0)}},$=(g,m,s)=>{if(s===0)return{delta:null,text:"—",class:"hm-empty"};const i=a.heatmap.months[s],f=a.heatmap.months[s-1];if(!i||!f)return{delta:null,text:"—",class:"hm-empty"};const n=p(g,m,i.key),k=p(g,m,f.key);if(!n||!k)return{delta:null,text:"—",class:"hm-empty"};const C=n.meta,E=k.meta;if(E===0)return C===0?{delta:0,text:"0.0%",class:"hm-ok"}:{delta:null,text:"—",class:"hm-empty"};const u=(C-E)/E*100;let v="hm-ok";u<0?v="hm-down":u===0||u<=5?v="hm-ok":u<=10?v="hm-warn":v="hm-alert";const L=u>0?"+":"";return{delta:u,text:`${L}${u.toFixed(1)}%`,class:v}},T=g=>g===null?"hm-empty":g<50?"hm-bad":g<100?"hm-warn":"hm-ok",V=(g,m,s,i)=>{const f=a.heatmap.units.find(k=>k.value===g)?.label||g,n=r.value.find(k=>k.id===m)?.label||m;if(t.value==="variacao"&&s!==void 0){const k=a.heatmap.months[s],C=s>0?a.heatmap.months[s-1]:null;if(!k)return`${f} × ${n}`;const E=p(g,m,k.key),u=C?p(g,m,C.key):null;let v=`${n} - ${k.label}
`;if(v+=`Meta: ${b(E?.meta||0)}`,E?.real!==void 0&&(v+=`
Real: ${b(E.real)}`),C&&u){v+=`

Anterior (${C.label}):`,v+=`
Meta: ${b(u.meta||0)}`,u.real!==void 0&&(v+=`
Real: ${b(u.real)}`);const L=$(g,m,s);L.delta!==null&&(v+=`

Variação: ${L.text}`)}return v}else if(i){const k=a.heatmap.months.find(v=>v.key===i),C=p(g,m,i),E=_(g,m,i);let u=`${f} × ${n}`;return k&&(u+=` - ${k.label}`),u+=`

Atingimento: ${E.text}`,C&&(u+=`
Real: ${b(C.real||0)}`,u+=`
Meta: ${b(C.meta||0)}`),u}else{const k=F(g,m),C=y(g,m);let E=`${f} × ${n}

`;return E+=`Atingimento: ${C.text}`,k&&(E+=`
Real: ${b(k.real||0)}`,E+=`
Meta: ${b(k.meta||0)}`),E}},j=D(()=>o.value==="familia"?a.heatmap.sectionsFamilia.length>0&&(Object.keys(a.heatmap.dataFamilia).length>0||Object.keys(a.heatmap.dataFamiliaMensal).length>0):a.heatmap.sectionsIndicador.length>0&&(Object.keys(a.heatmap.dataIndicador).length>0||Object.keys(a.heatmap.dataIndicadorMensal).length>0)),R=D(()=>o.value==="familia"?Object.keys(a.heatmap.dataFamiliaMensal).length>0:Object.keys(a.heatmap.dataIndicadorMensal).length>0);return(g,m)=>(d(),c("div",ua,[e("div",ma,[e("h3",va," Heatmap — Regionais × "+h(o.value==="familia"?"Famílias":"Indicadores"),1),e("div",ha,[e("div",pa,[e("button",{class:I(["seg-btn",{"is-active":o.value==="familia"}]),onClick:m[0]||(m[0]=s=>o.value="familia"),title:"Visualizar por Família"}," Família ",2),e("button",{class:I(["seg-btn",{"is-active":o.value==="indicador"}]),onClick:m[1]||(m[1]=s=>o.value="indicador"),title:"Visualizar por Indicador"}," Indicador ",2)]),e("div",_a,[e("button",{class:I(["seg-btn",{"is-active":t.value==="atingimento"}]),onClick:m[2]||(m[2]=s=>t.value="atingimento"),title:"Mostrar Atingimento"}," Atingimento ",2),e("button",{class:I(["seg-btn",{"is-active":t.value==="variacao"}]),onClick:m[3]||(m[3]=s=>t.value="variacao"),title:"Mostrar Variação da Meta"}," Variação Meta ",2)])])]),j.value?(d(),c("div",ka,[e("div",{class:"hm-row hm-head",style:B(`--hm-cols: ${t.value==="variacao"||t.value==="atingimento"&&l.heatmap.months.length>0&&R.value?r.value.length*l.heatmap.months.length:r.value.length}; --hm-first: 200px; --hm-cell: ${t.value==="variacao"||t.value==="atingimento"&&l.heatmap.months.length>0&&R.value?"100px":"140px"}`)},[e("div",$a,[m[5]||(m[5]=e("span",{class:"hm-corner-label"},"Regional",-1)),e("span",xa,"\\ "+h(t.value==="variacao"||t.value==="atingimento"&&l.heatmap.months.length>0?o.value==="familia"?"Família × Mês":"Indicador × Mês":o.value==="familia"?"Família":"Indicador"),1)]),t.value==="variacao"?(d(!0),c(x,{key:0},M(r.value,s=>(d(),c(x,{key:s.id},[(d(!0),c(x,null,M(l.heatmap.months,i=>(d(),c("div",{key:`${s.id}-${i.key}`,class:"hm-cell hm-col",title:`${s.label} - ${i.label}`},[e("div",ba,[e("span",ya,h(s.label),1),e("span",wa,h(i.label),1)])],8,fa))),128))],64))),128)):t.value==="atingimento"&&l.heatmap.months.length>0&&R.value?(d(!0),c(x,{key:1},M(r.value,s=>(d(),c(x,{key:s.id},[(d(!0),c(x,null,M(l.heatmap.months,i=>(d(),c("div",{key:`${s.id}-${i.key}`,class:"hm-cell hm-col",title:`${s.label} - ${i.label}`},[e("div",Da,[e("span",Fa,h(s.label),1),e("span",Ea,h(i.label),1)])],8,Ma))),128))],64))),128)):(d(!0),c(x,{key:2},M(r.value,s=>(d(),c("div",{key:s.id,class:"hm-cell hm-col",title:s.label},h(s.label),9,Ca))),128))],4),(d(!0),c(x,null,M(l.heatmap.units,s=>(d(),c("div",{key:s.value,class:"hm-row",style:B(`--hm-cols: ${t.value==="variacao"||t.value==="atingimento"&&l.heatmap.months.length>0&&R.value?r.value.length*l.heatmap.months.length:r.value.length}; --hm-first: 200px; --hm-cell: ${t.value==="variacao"||t.value==="atingimento"&&l.heatmap.months.length>0&&R.value?"100px":"140px"}`)},[e("div",{class:"hm-cell hm-rowh",title:s.label},[e("span",La,h(s.label),1)],8,Ia),t.value==="variacao"?(d(!0),c(x,{key:0},M(r.value,i=>(d(),c(x,{key:i.id},[(d(!0),c(x,null,M(l.heatmap.months,(f,n)=>(d(),c("div",{key:`${i.id}-${f.key}`,class:I(["hm-cell hm-val",$(s.value,i.id,n).class]),title:V(s.value,i.id,n)},[e("span",Pa,h($(s.value,i.id,n).text),1)],10,Ra))),128))],64))),128)):t.value==="atingimento"&&l.heatmap.months.length>0&&R.value?(d(!0),c(x,{key:1},M(r.value,i=>(d(),c(x,{key:i.id},[(d(!0),c(x,null,M(l.heatmap.months,f=>(d(),c("div",{key:`${i.id}-${f.key}`,class:I(["hm-cell hm-val",T(_(s.value,i.id,f.key).pct)]),title:V(s.value,i.id,void 0,f.key)},[e("span",Va,h(_(s.value,i.id,f.key).text),1)],10,Ta))),128))],64))),128)):(d(!0),c(x,{key:2},M(r.value,i=>(d(),c("div",{key:i.id,class:I(["hm-cell hm-val",T(y(s.value,i.id).pct)]),title:V(s.value,i.id)},[e("span",Aa,h(y(s.value,i.id).text),1)],10,ja))),128))],4))),128))])):(d(),c("div",ga,[...m[4]||(m[4]=[e("p",null,"Nenhum dado disponível para os filtros selecionados.",-1)])]))]))}}),Ga=S(Ba,[["__scopeId","data-v-95041719"]]),Sa={class:"exec-wrapper"},Ha={id:"view-exec",class:"exec-view"},Oa={class:"exec-header"},za={id:"exec-context",class:"exec-context"},qa=["disabled"],Na={class:"exec-panels"},Ya=H({__name:"VisaoExecutiva",setup(l){const{filterState:a,period:o}=W(),t=A(null),r=A(!1),F=A(null),p=A(!1),y=D(()=>t.value?.kpis||{real_mens:0,meta_mens:0,real_acum:0,meta_acum:0}),_=D(()=>t.value?.ranking||[]),$=D(()=>t.value?.status||{hit:[],quase:[],longe:[]}),T=D(()=>t.value?.chart||{keys:[],labels:[],series:[]}),V=D(()=>t.value?.heatmap||{units:[],sectionsFamilia:[],sectionsIndicador:[],dataFamilia:{},dataIndicador:{},dataFamiliaMensal:{},dataIndicadorMensal:{},months:[]}),j=D(()=>{const n={};return a.value.segmento&&a.value.segmento.toLowerCase()!=="todos"&&(n.segmento=a.value.segmento),a.value.diretoria&&a.value.diretoria.toLowerCase()!=="todas"&&(n.diretoria=a.value.diretoria),a.value.gerencia&&a.value.gerencia.toLowerCase()!=="todas"&&(n.regional=a.value.gerencia),a.value.agencia&&a.value.agencia.toLowerCase()!=="todas"&&(n.agencia=a.value.agencia),a.value.ggestao&&a.value.ggestao.toLowerCase()!=="todos"&&(n.gerenteGestao=a.value.ggestao),a.value.gerente&&a.value.gerente.toLowerCase()!=="todos"&&(n.gerente=a.value.gerente),o.value?.start&&(n.dataInicio=o.value.start),o.value?.end&&(n.dataFim=o.value.end),n}),R=D(()=>[..._.value].sort((n,k)=>k.p_mens-n.p_mens).slice(0,5)),g=D(()=>[..._.value].sort((n,k)=>n.p_mens-k.p_mens).slice(0,5).reverse()),m=async()=>{r.value=!0,F.value=null;try{const n=await ae(j.value);n?t.value=n:F.value="Erro ao carregar dados executivos"}catch(n){F.value=n instanceof Error?n.message:"Erro desconhecido",console.error("Erro ao carregar dados executivos:",n)}finally{r.value=!1}};Y([j,o],()=>{m()},{deep:!0}),Q(()=>{m()});const s=D(()=>{const n=a.value;return`${n.gerente&&n.gerente!=="Todos"?`Gerente: ${n.gerente}`:n.ggestao&&n.ggestao!=="Todos"?`GG: ${n.ggestao}`:n.agencia&&n.agencia!=="Todas"?`Agência: ${n.agencia}`:n.gerencia&&n.gerencia!=="Todas"?`GR: ${n.gerencia}`:n.diretoria&&n.diretoria!=="Todas"?`Diretoria: ${n.diretoria}`:"Todas as Diretorias"} · Período: ${N(o.value.start)} a ${N(o.value.end)}`}),{exportToPDF:i}=ee(),f=async()=>{if(!p.value){p.value=!0;try{await i("view-exec")}catch(n){console.error("Erro ao gerar PDF:",n),alert("Erro ao gerar PDF. Tente novamente.")}finally{p.value=!1}}};return(n,k)=>(d(),c("div",Sa,[e("div",Ha,[r.value?(d(),c(x,{key:0},[k[0]||(k[0]=K('<div class="skeleton skeleton--context" style="height:24px;width:200px;margin-bottom:24px;border-radius:6px;" data-v-44e94380></div><div class="exec-kpis" data-v-44e94380><div class="skeleton skeleton--kpi-card" style="height:140px;border-radius:12px;" data-v-44e94380></div><div class="skeleton skeleton--kpi-card" style="height:140px;border-radius:12px;" data-v-44e94380></div><div class="skeleton skeleton--kpi-card" style="height:140px;border-radius:12px;" data-v-44e94380></div></div><div class="exec-chart" style="margin-top:24px;" data-v-44e94380><div class="skeleton skeleton--chart-title" style="height:24px;width:250px;margin-bottom:16px;border-radius:6px;" data-v-44e94380></div><div class="skeleton skeleton--chart" style="height:300px;width:100%;border-radius:12px;" data-v-44e94380></div></div><div class="exec-panels" style="margin-top:24px;display:grid;grid-template-columns:1fr 1fr;gap:24px;" data-v-44e94380><div class="skeleton skeleton--panel" style="height:400px;border-radius:12px;" data-v-44e94380></div><div class="skeleton skeleton--panel" style="height:400px;border-radius:12px;" data-v-44e94380></div></div>',4))],64)):(d(),c(x,{key:1},[e("div",Oa,[e("div",za,[e("strong",null,h(s.value),1)]),e("button",{class:"btn-download-pdf",onClick:f,disabled:p.value,title:"Baixar como PDF"},[G(Z,{name:p.value?"loader-2":"download",size:20,color:"white",class:I({spinning:p.value})},null,8,["name","class"]),e("span",null,h(p.value?"Gerando PDF...":"Baixar PDF"),1)],8,qa)]),G(ye,{kpis:y.value},null,8,["kpis"]),G(ie,{"chart-data":T.value},null,8,["chart-data"]),e("div",Na,[G(Ne,{"top-ranking":R.value,"bottom-ranking":g.value},null,8,["top-ranking","bottom-ranking"]),G(da,{status:$.value},null,8,["status"])]),G(Ga,{heatmap:V.value},null,8,["heatmap"])],64))])]))}}),tt=S(Ya,[["__scopeId","data-v-44e94380"]]);export{tt as default};
