import{b as E,r as g,e as O,w as S,m as o,k as r,q as m,j as v,B as p,E as f,F as V,D as I,t as K,v as b,y as $,A as B,o as i}from"./vendor.iNPlSTaR.js";import{I as N,_ as L}from"./index.oIu47dWK.js";const q=["id","value","disabled"],M={key:0,value:""},U=["value"],z=["aria-expanded","aria-controls","aria-label"],F=["aria-label"],R=["id","aria-label"],_=["aria-label"],j={key:0,class:"select__empty",role:"status","aria-live":"polite"},P=["aria-selected","tabindex","onClick","onKeydown"],G=E({__name:"SelectInput",props:{modelValue:{},options:{},placeholder:{default:"Selecione..."},label:{default:""},disabled:{type:Boolean,default:!1},id:{default:""}},emits:["update:modelValue"],setup(l,{emit:C}){const n=l,y=C,s=g(!1),d=g(null),h=O(()=>n.modelValue&&n.options.find(a=>a.id===n.modelValue)?.nome||n.placeholder),k=()=>{n.disabled||(s.value=!s.value)},u=e=>{y("update:modelValue",e.id),s.value=!1},w=e=>{if(e.key==="Escape")s.value=!1;else if(e.key==="Enter"&&n.options.length>0&&s.value){e.preventDefault();const a=n.options[0];a&&u(a)}else["ArrowDown","ArrowUp"," "].includes(e.key)&&!s.value?(e.preventDefault(),s.value=!0):e.key==="ArrowDown"&&s.value?(e.preventDefault(),A()):e.key==="ArrowUp"&&s.value&&(e.preventDefault(),D())},A=()=>{const e=d.value?.querySelectorAll(".select__item");if(!e||e.length===0)return;const a=Array.from(e).findIndex(c=>c===document.activeElement),t=a<e.length-1?a+1:0;e[t]?.focus()},D=()=>{const e=d.value?.querySelectorAll(".select__item");if(!e||e.length===0)return;const a=Array.from(e).findIndex(c=>c===document.activeElement),t=a>0?a-1:e.length-1;e[t]?.focus()};return(e=>{const a=t=>{d.value&&!d.value.contains(t.target)&&e()};$(()=>{document.addEventListener("click",a)}),B(()=>{document.removeEventListener("click",a)})})(()=>{s.value=!1}),S(()=>n.disabled,e=>{e&&(s.value=!1)}),(e,a)=>(i(),o("div",{ref_key:"wrapperRef",ref:d,class:r(["select",{"is-open":s.value}])},[m("select",{id:l.id,value:l.modelValue,onChange:a[0]||(a[0]=t=>y("update:modelValue",t.target.value)),onMousedown:p(k,["prevent"]),onKeydown:w,class:"input",disabled:l.disabled,style:{display:"none"}},[l.modelValue?v("",!0):(i(),o("option",M,f(l.placeholder),1)),(i(!0),o(V,null,I(l.options,t=>(i(),o("option",{key:t.id,value:t.id},f(t.nome),9,U))),128))],40,q),m("div",{class:r(["select__trigger",{"is-disabled":l.disabled}]),onClick:k,onKeydown:w,tabindex:"0",role:"combobox","aria-expanded":s.value,"aria-haspopup":"listbox","aria-controls":`${l.id}-listbox`,"aria-label":l.label||"Selecione uma opção"},[m("span",{class:r({"is-placeholder":!l.modelValue}),"aria-label":l.modelValue?h.value:l.placeholder},f(h.value),11,F),K(N,{name:"chevron-down",size:16,class:r({"is-open":s.value})},null,8,["class"])],42,z),s.value?(i(),o("div",{key:0,id:`${l.id}-listbox`,class:"select__panel",role:"listbox","aria-label":l.label||"Opções",onKeydown:a[1]||(a[1]=b(t=>s.value=!1,["escape"]))},[m("div",{class:"select__results",role:"group","aria-label":`${l.options.length} opções disponíveis`},[l.options.length===0?(i(),o("div",j," Nenhuma opção disponível ")):v("",!0),(i(!0),o(V,null,I(l.options,(t,c)=>(i(),o("button",{key:t.id,type:"button",class:r(["select__item",{"is-selected":t.id===l.modelValue}]),role:"option","aria-selected":t.id===l.modelValue,tabindex:c===0?0:-1,onClick:x=>u(t),onKeydown:[b(p(x=>u(t),["prevent"]),["enter"]),b(p(x=>u(t),["prevent"]),["space"])]},f(t.nome),43,P))),128))],8,_)],40,R)):v("",!0)],2))}}),T=L(G,[["__scopeId","data-v-01edc6f8"]]);export{T as S};
